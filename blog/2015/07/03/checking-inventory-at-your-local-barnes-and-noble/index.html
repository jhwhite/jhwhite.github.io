
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Checking Inventory at Your Local Barnes and Noble - Thoughts and Deeds</title>
  <meta name="author" content="Jody White">

  
  <meta name="description" content="Does anyone really shop or buy at local brick &amp; mortar stores anymore? No? Well, this was still a fun app to make. A few days ago someone in a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jhwhite.github.io/blog/2015/07/03/checking-inventory-at-your-local-barnes-and-noble">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Thoughts and Deeds" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53820136-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Thoughts and Deeds</a></h1>
  
    <h2>Unbowed Unbent Unbroken</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jhwhite.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Checking Inventory at Your Local Barnes and Noble</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-03T14:49:10-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2015</span></span> <span class='time'>2:49 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Does anyone really shop or buy at local brick &amp; mortar stores anymore? No? Well, this was still a fun app to make.</p>

<p>A few days ago someone in a forum I frequent posted that they keep a list of bookmarks to bn.com that told them stock levels for their local BN but something had changed and the link was no longer working.</p>

<p>What he had to do now was go to the specific item page, click a button that would open up a search by zip box, enter the zip, then get a modal telling him if it was in stock. He wanted to know if there was a way to link directly to the pop-up.</p>

<p>I did a search for The Martian by Andy Weir, poked around the item page and the modal using Chrome dev tools and didn&rsquo;t see a way to link directly to the modal but I did find something interesting!</p>

<p>While they only told you if the item was In Stock or not the return response provided you with quite a bit of other information! Including the number the store has on hand.</p>

<p><img src="/images/dev_tools.png" title="image" alt="images"></p>

<p>BN is requiring custom headers to get to the response via http but if you right click on the Name of the file in the Network tab of Dev tools you can choose <code>Copy as cURL</code>. Paste that into a terminal window and you get the json response back for that item!.</p>

<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl <span class="s1">&#39;http://stores.barnesandnoble.com/ris/inventory?ean=0670541597682&amp;page=1&amp;pageSize=5&amp;zipcode=22911&#39;</span> -H <span class="s1">&#39;ris-zip: 22911&#39;</span> -H <span class="s1">&#39;Accept-Encoding: gzip, deflate, sdch&#39;</span> -H <span class="s1">&#39;Accept-Language: en-US,en;q=0.8&#39;</span> -H <span class="s1">&#39;ris-chash: e0a986c0f4f2defbe1218df7f050dcb1&#39;</span> -H <span class="s1">&#39;ris-appsig: bc9a6da9d84f82a1048b52e058a0eff7&#39;</span> -H <span class="s1">&#39;Cookie: TS01e75984_76=08ea36dc92ab2800efd856ac2f7d30201365d091bb47de8b2d3be5964994f0f6c5a50db942b6f40f434d0d2c7c77c48608f8b9c31a87f800ef62a9c7eac1075345cef3282d782d18aa54589386a7c3608f3fc60cecf03f5ffe4bc3487d55554999902bcb466ef9f5f485e875c1e8d44835339daf27f4ab6c7690714708a7c4874897b81ce3feaeb51db92d10aac5c26bc285fee97bcc39f78f695c07e88e24d1e51edb2e7c55aecf101d23559ac2985478ad9cf6c98df8c558d2991018acdf217493b70dd8f7f8879242cbc60b256687e1bb2b6a3e0400023026e1f14e3971213eff1d8f6bbbac0c0020bcae0d515a02096c1850538bf79510ac65bea231ee0545079a706bdbb051e519afb8701270265d72a2543cb49ba2060e39eb18b3789765d95eed4f288a4169202b31ff1a8fd6; JSESSIONID=Jqkh0Ej4GrQyRU0l22mi7Gmv; TS01cdc16d=01b22697604b1912c5bdc420b66e39c850afb865bd6dc3ef4749d23d80be419f7ed6d20da0450efdf480fa9cb6b55d2ed776258918; DeviceType=Desktop; showSiteAs=Desktop; client-profile=Desktop; TS01af0a8e=01b2269760af1d36cb4fb5b7ca692976712a5a4967599fe0d92b4d461161ec5546daabbaf985f7aee29c78c510273b9641b2400b03ba398c602fa8f53a55c470ada9317dc274f5309eb70a67d500b94d8bc3967ea9; AMCV_9A223704532965F10A490D44%40AdobeOrg=1256414278%7CMCMID%7C87343886875634417124019563558639690053%7CMCAAMLH-1436405345%7C7%7CMCAAMB-1436405345%7CNRX38WO0n5BH8Th-nqAG_A%7CMCAID%7CNONE; BIGipServerwby-fe-cseap-pool_8080=!r4eYi3prBznUjIadz57UnRO+XgUP9GBXYJfEiZiVWLXTTCnzTWp5rZ04wSAzFGUwaHq6wRb8mxEIvSY=; BIGipServerwby-fe-caiws-pool_80=!Z9RlgWru6D6gob6dz57UnRO+XgUP9L0vERSL4mYexaoUiHw4Fi8ZummU6q36Ngq8oou4t0cx+H0TbBU=; __gads=ID=afd12464bf4e9ede:T=1435934093:S=ALNI_MY-qv9PAulhhBNeDsi8gI_pQrJPUg; __qca=P0-1566046451-1435934094100; s_vnum=1438401600945%26vn%3D7; ADRUM=s=1435948949240&amp;r=http%3A%2F%2Fwww.barnesandnoble.com%2Fs%2Fdead%2Bof%2Bwinter%3F-119814330; _ga=GA1.2.396886361.1435800545; s_cc=true; RT=; s_invisit=true; s_depth=10; s_lv=1435949667207; s_lv_s=Less%20than%201%20day; TS01e75984_27=014a7c9820ca1a3947ea741b05132d8a885f8cea36ffe609379a58536d96879aaae5d69311f62543b4d861c7f03c05bd3c4541cf9d; TS01e75984=01b22697609a9717ceff3263c877f56b460b919f8036a719ac8691a5803d05c8f6122d12c52b2c5bebf0cdc90c0ef5a3452c8b5e7889135d6accf7433d07dc5d794d82006e&#39;</span> -H <span class="s1">&#39;ris-email: &#39;</span> -H <span class="s1">&#39;Connection: keep-alive&#39;</span> -H <span class="s1">&#39;ris-appts: 1435949667246&#39;</span> -H <span class="s1">&#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.130 Safari/537.36&#39;</span> -H <span class="s1">&#39;ris-price: 53.95&#39;</span> -H <span class="s1">&#39;Accept: application/json, text/plain, */*&#39;</span> -H <span class="s1">&#39;Referer: http://stores.barnesandnoble.com/ris/reservation.jsp?zipcode=22911&amp;price=53.95&amp;email=&amp;chash=e0a986c0f4f2defbe1218df7f050dcb1&amp;appid=bndotcom&amp;appsig=bc9a6da9d84f82a1048b52e058a0eff7&amp;ean=0670541597682&amp;appts=1435949667246&amp;&#39;</span> -H <span class="s1">&#39;ris-ean: 0670541597682&#39;</span> -H <span class="s1">&#39;ris-appid: bndotcom&#39;</span> --compressed
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>That&rsquo;s great and all but how are we going to put this into a script to make it usable?</p>

<p>Heading to this page you can convert cURL to Python requests. <a href="Convert%20cURL%20to%20Python">http://curl.trillworks.com/</a>. Paste the cURL command in, click the button, and copy your Python code!</p>

<p>You&rsquo;ll get something that looks like this:</p>

<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;TS01e75984_76&#39;</span><span class="p">:</span> <span class="s">&#39;08ea36dc92ab2800efd856ac2f7d30201365d091bb47de8b2d3be5964994f0f6c5a50db942b6f40f434d0d2c7c77c48608f8b9c31a87f800ef62a9c7eac1075345cef3282d782d18aa54589386a7c3608f3fc60cecf03f5ffe4bc3487d55554999902bcb466ef9f5f485e875c1e8d44835339daf27f4ab6c7690714708a7c4874897b81ce3feaeb51db92d10aac5c26bc285fee97bcc39f78f695c07e88e24d1e51edb2e7c55aecf101d23559ac2985478ad9cf6c98df8c558d2991018acdf217493b70dd8f7f8879242cbc60b256687e1bb2b6a3e0400023026e1f14e3971213eff1d8f6bbbac0c0020bcae0d515a02096c1850538bf79510ac65bea231ee0545079a706bdbb051e519afb8701270265d72a2543cb49ba2060e39eb18b3789765d95eed4f288a4169202b31ff1a8fd6&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;JSESSIONID&#39;</span><span class="p">:</span> <span class="s">&#39;Jqkh0Ej4GrQyRU0l22mi7Gmv&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;TS01cdc16d&#39;</span><span class="p">:</span> <span class="s">&#39;01b22697604b1912c5bdc420b66e39c850afb865bd6dc3ef4749d23d80be419f7ed6d20da0450efdf480fa9cb6b55d2ed776258918&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;DeviceType&#39;</span><span class="p">:</span> <span class="s">&#39;Desktop&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;showSiteAs&#39;</span><span class="p">:</span> <span class="s">&#39;Desktop&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;client-profile&#39;</span><span class="p">:</span> <span class="s">&#39;Desktop&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;TS01af0a8e&#39;</span><span class="p">:</span> <span class="s">&#39;01b2269760af1d36cb4fb5b7ca692976712a5a4967599fe0d92b4d461161ec5546daabbaf985f7aee29c78c510273b9641b2400b03ba398c602fa8f53a55c470ada9317dc274f5309eb70a67d500b94d8bc3967ea9&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;AMCV_9A223704532965F10A490D44%40AdobeOrg&#39;</span><span class="p">:</span> <span class="s">&#39;1256414278%7CMCMID%7C87343886875634417124019563558639690053%7CMCAAMLH-1436405345%7C7%7CMCAAMB-1436405345%7CNRX38WO0n5BH8Th-nqAG_A%7CMCAID%7CNONE&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;BIGipServerwby-fe-cseap-pool_8080&#39;</span><span class="p">:</span> <span class="s">&#39;!r4eYi3prBznUjIadz57UnRO+XgUP9GBXYJfEiZiVWLXTTCnzTWp5rZ04wSAzFGUwaHq6wRb8mxEIvSY=&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;BIGipServerwby-fe-caiws-pool_80&#39;</span><span class="p">:</span> <span class="s">&#39;!Z9RlgWru6D6gob6dz57UnRO+XgUP9L0vERSL4mYexaoUiHw4Fi8ZummU6q36Ngq8oou4t0cx+H0TbBU=&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;__gads&#39;</span><span class="p">:</span> <span class="s">&#39;ID=afd12464bf4e9ede:T=1435934093:S=ALNI_MY-qv9PAulhhBNeDsi8gI_pQrJPUg&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;__qca&#39;</span><span class="p">:</span> <span class="s">&#39;P0-1566046451-1435934094100&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_vnum&#39;</span><span class="p">:</span> <span class="s">&#39;1438401600945%26vn%3D7&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ADRUM&#39;</span><span class="p">:</span> <span class="s">&#39;s=1435948949240&amp;r=http%3A</span><span class="si">%2F%2F</span><span class="s">www.barnesandnoble.com</span><span class="si">%2F</span><span class="s">s</span><span class="si">%2F</span><span class="s">dead%2Bof%2Bwinter</span><span class="si">%3F</span><span class="s">-119814330&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;_ga&#39;</span><span class="p">:</span> <span class="s">&#39;GA1.2.396886361.1435800545&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_cc&#39;</span><span class="p">:</span> <span class="s">&#39;true&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;RT&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_invisit&#39;</span><span class="p">:</span> <span class="s">&#39;true&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_depth&#39;</span><span class="p">:</span> <span class="s">&#39;10&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_lv&#39;</span><span class="p">:</span> <span class="s">&#39;1435949667207&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;s_lv_s&#39;</span><span class="p">:</span> <span class="s">&#39;Less%20than</span><span class="si">%201%</span><span class="s">20day&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;TS01e75984_27&#39;</span><span class="p">:</span> <span class="s">&#39;014a7c9820ca1a3947ea741b05132d8a885f8cea36ffe609379a58536d96879aaae5d69311f62543b4d861c7f03c05bd3c4541cf9d&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;TS01e75984&#39;</span><span class="p">:</span> <span class="s">&#39;01b22697609a9717ceff3263c877f56b460b919f8036a719ac8691a5803d05c8f6122d12c52b2c5bebf0cdc90c0ef5a3452c8b5e7889135d6accf7433d07dc5d794d82006e&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;ris-zip&#39;</span><span class="p">:</span> <span class="s">&#39;22911&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s">&#39;gzip, deflate, sdch&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s">&#39;en-US,en;q=0.8&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-chash&#39;</span><span class="p">:</span> <span class="s">&#39;e0a986c0f4f2defbe1218df7f050dcb1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appsig&#39;</span><span class="p">:</span> <span class="s">&#39;bc9a6da9d84f82a1048b52e058a0eff7&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-email&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Connection&#39;</span><span class="p">:</span> <span class="s">&#39;keep-alive&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appts&#39;</span><span class="p">:</span> <span class="s">&#39;1435949667246&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.130 Safari/537.36&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-price&#39;</span><span class="p">:</span> <span class="s">&#39;53.95&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept&#39;</span><span class="p">:</span> <span class="s">&#39;application/json, text/plain, */*&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Referer&#39;</span><span class="p">:</span> <span class="s">&#39;http://stores.barnesandnoble.com/ris/reservation.jsp?zipcode=22911&amp;price=53.95&amp;email=&amp;chash=e0a986c0f4f2defbe1218df7f050dcb1&amp;appid=bndotcom&amp;appsig=bc9a6da9d84f82a1048b52e058a0eff7&amp;ean=0670541597682&amp;appts=1435949667246&amp;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-ean&#39;</span><span class="p">:</span> <span class="s">&#39;0670541597682&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appid&#39;</span><span class="p">:</span> <span class="s">&#39;bndotcom&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://stores.barnesandnoble.com/ris/inventory?ean=0670541597682&amp;page=1&amp;pageSize=5&amp;zipcode=22911&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">cookies</span><span class="o">=</span><span class="n">cookies</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>Let&rsquo;s import <code>requests</code> (be sure to install requests if you don&rsquo;t already have it!) and add the Python code we just got. It turns out we don&rsquo;t need the cookies dictionary so we&rsquo;re going to remove that and at the end let&rsquo;s put the return into a variable.</p>

<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">requests</span>
</span><span class='line'>
</span><span class='line'><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;ris-zip&#39;</span><span class="p">:</span> <span class="s">&#39;22911&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s">&#39;gzip, deflate, sdch&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s">&#39;en-US,en;q=0.8&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-chash&#39;</span><span class="p">:</span> <span class="s">&#39;e0a986c0f4f2defbe1218df7f050dcb1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appsig&#39;</span><span class="p">:</span> <span class="s">&#39;bc9a6da9d84f82a1048b52e058a0eff7&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-email&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Connection&#39;</span><span class="p">:</span> <span class="s">&#39;keep-alive&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appts&#39;</span><span class="p">:</span> <span class="s">&#39;1435949667246&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.130 Safari/537.36&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-price&#39;</span><span class="p">:</span> <span class="s">&#39;53.95&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Accept&#39;</span><span class="p">:</span> <span class="s">&#39;application/json, text/plain, */*&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;Referer&#39;</span><span class="p">:</span> <span class="s">&#39;http://stores.barnesandnoble.com/ris/reservation.jsp?zipcode=22911&amp;price=53.95&amp;email=&amp;chash=e0a986c0f4f2defbe1218df7f050dcb1&amp;appid=bndotcom&amp;appsig=bc9a6da9d84f82a1048b52e058a0eff7&amp;ean=0670541597682&amp;appts=1435949667246&amp;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-ean&#39;</span><span class="p">:</span> <span class="s">&#39;0670541597682&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;ris-appid&#39;</span><span class="p">:</span> <span class="s">&#39;bndotcom&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://stores.barnesandnoble.com/ris/inventory?ean=0670541597682&amp;page=1&amp;pageSize=5&amp;zipcode=22911&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>Run this at the terminal and you should get the same return response we saw in dev tools.</p>

<p>Want to see that in a better format? At the top add <code>from pprint import pprint</code>.</p>

<p>Then we&rsquo;re going to call the .json() method on the return to get a Python dictionary we can work with.</p>

<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="n">pprint</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>




<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span><span class="s">&#39;content&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;ean&#39;</span><span class="p">:</span> <span class="s">&#39;9780553418026&#39;</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;firstPage&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;inventoryLoadDate&#39;</span><span class="p">:</span> <span class="s">&#39;2015-07-03 04:00:00&#39;</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;inventoryReservable&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;lastPage&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;page&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;pageCount&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;pageSize&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;availableOn&#39;</span><span class="p">:</span> <span class="mi">1414468800000</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;categoryDesc&#39;</span><span class="p">:</span> <span class="s">&#39;Science Fiction&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;createdAt&#39;</span><span class="p">:</span> <span class="mi">1419263528000</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;displayEan&#39;</span><span class="p">:</span> <span class="s">&#39;9780553418026&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;ean&#39;</span><span class="p">:</span> <span class="s">&#39;9780553418026&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;formatDescription&#39;</span><span class="p">:</span> <span class="s">&#39;Trade Paper&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;pageCount&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="s">&#39;15&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;publisherName&#39;</span><span class="p">:</span> <span class="s">&#39;Crown Publishing Group&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;subjectDesc&#39;</span><span class="p">:</span> <span class="s">&#39;Sf/Fantasy&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">&#39;Martian&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;updatedAt&#39;</span><span class="p">:</span> <span class="mi">1419263528000</span><span class="p">},</span>
</span><span class='line'>             <span class="s">&#39;searchZipcode&#39;</span><span class="p">:</span> <span class="s">&#39;22911&#39;</span><span class="p">,</span>
</span><span class='line'>             <span class="s">&#39;stores&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;address1&#39;</span><span class="p">:</span> <span class="s">&#39;Barracks Road Shopping Center&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;address2&#39;</span><span class="p">:</span> <span class="s">&#39;1035 Emmet St Suite A&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;city&#39;</span><span class="p">:</span> <span class="s">&#39;Charlottesville&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="mf">3.8863318</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;divisionId&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;hours&#39;</span><span class="p">:</span> <span class="s">&#39;Sun 9-9, Mon-Thurs 9-10, Fri &amp; Sat 9-11&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;hoursHtml&#39;</span><span class="p">:</span> <span class="s">&#39;Sun 9-9,&lt;br&gt; Mon-Thurs 9-10,&lt;br&gt; &#39;</span>
</span><span class='line'>                                      <span class="s">&#39;Fri &amp; Sat 9-11&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;inventory&#39;</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;inventoryDate&#39;</span><span class="p">:</span> <span class="s">&#39;2014-10-28 04:00:00&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;inventoryLoadDate&#39;</span><span class="p">:</span> <span class="mi">1435896000000</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Charlottesville&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;pageSize&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;phone&#39;</span><span class="p">:</span> <span class="s">&#39;434-984-0461&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;reservable&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;resultId&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;retailPrice&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;state&#39;</span><span class="p">:</span> <span class="s">&#39;VA&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;storeId&#39;</span><span class="p">:</span> <span class="mi">2559</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;storeReservable&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                         <span class="s">&#39;zipcode&#39;</span><span class="p">:</span> <span class="s">&#39;22903&#39;</span><span class="p">}],</span>
</span><span class='line'>             <span class="s">&#39;totalCount&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
</span><span class='line'> <span class="s">&#39;statusCode&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
</span><span class='line'> <span class="s">&#39;statusText&#39;</span><span class="p">:</span> <span class="s">&#39;OK&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>Inside the <code>stores</code> array is an <code>inventory</code> key that shows us the number of items that store has in stock!</p>

<p>Let&rsquo;s grab it&hellip;</p>

<p><code>print(r['content']['stores'][0]['inventory'])</code></p>

<p>But we want it to read a little better so let&rsquo;s add in some Python string interpolation:</p>

<p><code>print("There are {} in stock.".format(r['content']['stores'][0]['inventory']))</code></p>

<p>Gist of all the code: <a href="https://gist.github.com/jhwhite/3cfd02186e577db7a7e0">https://gist.github.com/jhwhite/3cfd02186e577db7a7e0</a></p>

<h2>Summary</h2>

<p>I&rsquo;ve actually done a little bit more with this here, <a href="http://nyt-bestsellers-at-bn.herokuapp.com/.">http://nyt-bestsellers-at-bn.herokuapp.com/.</a></p>

<p>In the next blog post I&rsquo;ll go into using the NYT Books API and checking Barnes and Noble stock against that, then in another blog post I&rsquo;ll write about how to put it all together using a Python microframework called Flask.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jody White</span></span>

      




<time class='entry-date' datetime='2015-07-03T14:49:10-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2015</span></span> <span class='time'>2:49 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/python/'>python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://jhwhite.github.io/blog/2015/07/03/checking-inventory-at-your-local-barnes-and-noble/" data-via="" data-counturl="http://jhwhite.github.io/blog/2015/07/03/checking-inventory-at-your-local-barnes-and-noble/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/08/14/tracking-job-applications-using-trello/" title="Previous Post: Tracking job applications using Trello">&laquo; Tracking job applications using Trello</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/11/28/horrible-best-buy-experience/" title="Next Post: Horrible Best Buy Experience">Horrible Best Buy Experience &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/28/horrible-best-buy-experience/">Horrible Best Buy Experience</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/03/checking-inventory-at-your-local-barnes-and-noble/">Checking Inventory at Your Local Barnes and Noble</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/14/tracking-job-applications-using-trello/">Tracking Job Applications Using Trello</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Jody White -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
